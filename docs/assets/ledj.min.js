!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("ledj",[],t):"object"==typeof exports?exports.ledj=t():e.ledj=t()}(this,function(){return function(e){function t(n){if(a[n])return a[n].exports;var o=a[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var a={};return t.m=e,t.c=a,t.d=function(e,a,n){t.o(e,a)||Object.defineProperty(e,a,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var a=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(a,"a",a),a},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,a){"use strict";a(1),a(2),a(3),a(4),a(5),a(6),a(7),a(8),a(9),a(10),a(11),a(12),a(13),a(14)},function(e,t,a){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e){"undefined"==typeof Ledj?e.Ledj=function(){function t(e,t){g.getJSONConfig(e,function(a,n){null===a&&(n.hasOwnProperty("config")&&n.hasOwnProperty("data")?(g.cache.curCacheID=g.cache.jsonConfig.push(n.config)-1,g.cache.jsonData[g.cache.curCacheID]=n.data,g.cache.jsonUrl[g.cache.curCacheID]=e,t(g.cache.curCacheID)):a="JSON data must have `config` and `data` properties."),null!==a&&console.warn('Config file "'+e+'" could not be retrieved. '+a)})}function a(e,t){e.hasOwnProperty("config")&&e.hasOwnProperty("data")?(g.cache.curCacheID=g.cache.jsonConfig.push(e.config)-1,g.cache.jsonData[g.cache.curCacheID]=e.data,t(g.cache.curCacheID)):console.warn("Config object must have `config` and `data` properties.")}function o(e,t){var a=""===g.cache.sortDataBy?g.defaults.sortDataBy:g.cache.sortDataBy,n=""===g.cache.sortDataDir?g.defaults.sortDataDir:g.cache.sortDataDir;if(e[a]&&t[a]&&e[a]!==t[a]){var o="string"==typeof e[a]?e[a].toLowerCase():e[a],c="string"==typeof t[a]?t[a].toLowerCase():t[a];return"desc"===n?o>c?-1:1:o<c?-1:1}return 0}function c(e){if(g.cache.sortDataBy=g.defaults.sortDataBy,g.cache.jsonConfig[e].hasOwnProperty("sortBy")&&"string"==typeof g.cache.jsonConfig[e].sortBy&&(g.cache.sortDataBy=g.cache.jsonConfig[e].sortBy),g.cache.sortDataDir=g.defaults.sortDataDir,g.cache.jsonConfig[e].hasOwnProperty("sortDir")&&("asc"===g.cache.jsonConfig[e].sortDir.toLowerCase()||0===g.cache.jsonConfig[e].sortDir?g.cache.sortDataDir="asc":"desc"===g.cache.jsonConfig[e].sortDir.toLowerCase()||1===g.cache.jsonConfig[e].sortDir?g.cache.sortDataDir="desc":console.warn('Invalid sort direction "'+g.cache.jsonConfig[e].sortDir+'". Defaulting to "asc (0)".')),g.cache.jsonData[e])if(Array.isArray(g.cache.jsonData[e]))g.cache.jsonData[e]=g.cache.jsonData[e].sort(o);else if("object"===n(g.cache.jsonData[e]))for(var t in g.cache.jsonData[e])g.cache.jsonData[e][t].sort(o);else console.warn("Could not sort cache.jsonData["+e+"]");else console.warn("from Ledj.sortJsonDataBy(): `cache.jsonData["+e+"]` does not exist.")}function r(e,t){var a={cacheID:e,objectKey:t,itemHrefKey:"href",newTab:!0,itemImageKey:"filename",itemTitleKey:"title"};return l(g.templates.linkGrid(a),e,t)}function s(e,t){var a={cacheID:e,objectKey:t};return l(g.templates.table(a),e,t)}function i(e,t){var a={cacheID:e,objectKey:t};return l(g.templates.gifGrid(a),e,t)}function l(e,t,a){return g.templates.parent({title:f(t,a),cacheID:t,childHTML:e})}function d(e,t){var a=document.getElementById(t);if(a){g.cache.elementID[e]=t;var o=null;switch(g.cache.jsonConfig[e].type.toLowerCase()){case"link-grid":case"linkgrid":o=r;break;case"table":o=s;break;case"gif-grid":case"gifgrid":o=i;break;default:console.log("A fallback template is not yet implemented.")}if(o){var c="";if(Array.isArray(g.cache.jsonData[e]))c=o(e);else if("object"===n(g.cache.jsonData[e]))for(var l in g.cache.jsonData[e])c+=o(e,l);else console.warn("Couldn't find a template to use - Ledj shouldn't get here");""!==c&&(a.innerHTML+=c,g.cache.tagTemplateUsed&&(g.removeTagClickListeners(),g.addTagClickListeners()))}else console.warn("A template could not be identified.")}else console.warn("Element "+(t?"#"+t:"[undefined]")+" does not exist.")}function f(e,t){if(t&&""!==t){var a="h2";return g.cache.jsonConfig[e].hasOwnProperty("titleElementLevel")&&"number"==typeof parseInt(g.cache.jsonConfig[e].titleElementLevel)&&(a="h"+g.cache.jsonConfig[e].titleElementLevel),"<"+a+' class="ledj-title">'+t+"</"+a+">"}return null}function u(e){try{document.getElementById(e).innerHTML=""}catch(e){console.warn(e)}}function h(e,t){g.cache.tagTemplateUsed=!1,c(e),d(e,t)}var g={};return g.cache={jsonConfig:[],jsonData:[],jsonUrl:[],elementID:[],sortDataBy:"",sortDataDir:"",curCacheID:-1,tagTemplateUsed:!1},g.defaults={sortDataBy:"title",sortDataDir:"asc",dateFormat:"mm/dd/yyyy",selectMultipleTags:!0},g.templates={data:{}},g.urlExists=function(e,t,a,n){var o=new XMLHttpRequest;o.open("HEAD",e),o.onreadystatechange=function(){if(this.readyState===this.DONE)if(200===this.status){if(null===t)return 0;t(n)}else{if(null===a)return-1;a(n)}},o.send()},g.reset=function(e){u(g.cache.elementID[e])},g.getJSONConfig=function(e,t){if("string"==typeof e){e+="?dt="+Date.now();var a=new XMLHttpRequest;a.open("GET",e,!0),a.responseType="json",a.onload=function(){var e=a.status;200===e?t(null,a.response):t(e)},a.send()}else t("[url] must be a string.")},g.getHostName=function(){return e.location.protocol+"//"+e.location.hostname+(e.location.port?":"+e.location.port:"")},g.capitalize=function(e){return"string"==typeof e?e.charAt(0).toUpperCase()+e.slice(1).toLowerCase():e},g.nameToID=function(e){return e.replace(/\\s/g,"-").toLowerCase()},g.formatDateString=function(t,a){if(e.moment){var n=moment(t),a=a||g.defaults.dateFormat;return n.format(a)}var o=new Date(t);return o.getMonth()+"/"+o.getDate()+"/"+o.getFullYear()},g.toggleActiveTagsByClassName=function(e){var t=e.target.className.replace("tag","").replace("active","").trim();if(g.defaults.selectMultipleTags){var a=!0,n=!1,o=void 0;try{for(var c,r=document.getElementsByClassName(t)[Symbol.iterator]();!(a=(c=r.next()).done);a=!0){var s=c.value;s.className.includes("active")?s.className="tag "+t:s.className="tag active "+t}}catch(e){n=!0,o=e}finally{try{!a&&r.return&&r.return()}finally{if(n)throw o}}}else{var i=!0,l=!1,d=void 0;try{for(var f,u=document.getElementsByClassName("tag")[Symbol.iterator]();!(i=(f=u.next()).done);i=!0){var h=f.value,m=h.className.split(" ");m.includes(t)&&!m.includes("active")?h.className="tag active "+t:h.className=h.className.replace("active","").trim()}}catch(e){l=!0,d=e}finally{try{!i&&u.return&&u.return()}finally{if(l)throw d}}}},g.addTagClickListeners=function(){var e=!0,t=!1,a=void 0;try{for(var n,o=document.getElementsByClassName("tag")[Symbol.iterator]();!(e=(n=o.next()).done);e=!0){n.value.addEventListener("click",g.toggleActiveTagsByClassName)}}catch(e){t=!0,a=e}finally{try{!e&&o.return&&o.return()}finally{if(t)throw a}}},g.removeTagClickListeners=function(){var e=!0,t=!1,a=void 0;try{for(var n,o=document.getElementsByClassName("tag")[Symbol.iterator]();!(e=(n=o.next()).done);e=!0){n.value.removeEventListener("click",g.toggleActiveTagsByClassName)}}catch(e){t=!0,a=e}finally{try{!e&&o.return&&o.return()}finally{if(t)throw a}}},g.getCellContent=function(e,t,a){var n="";switch(a[t]=a[t]?a[t]:"",e.type.toLowerCase()){case"url":n+=g.templates.data.url({text:a[t],href:a[e.href]});break;case"image":n+=g.templates.data.image({src:a[e.src],alt:a[e.alt]});break;case"date":var o=e.hasOwnProperty("dateFormat")?e.dateFormat:null;n+=g.templates.data.date({date:a[t],dateFormat:o});break;case"phone":n+=g.templates.data.phone({phone_num:a[t]});break;case"code":n+=g.templates.data.code({text:a[t]});break;case"tag-array":case"tagarray":g.cache.tagTemplateUsed=!0,n+=g.templates.data.tagArray({tags:a[t]});break;case"string":default:n+=g.templates.data.string({text:a[t]})}return n},g.getImageUrl=function(e,t,a){var n="/",o=g.cache.jsonConfig[t].hasOwnProperty("imgExt")?g.cache.jsonConfig[t].imgExt:"";return g.cache.jsonConfig[t].hasOwnProperty("srcDir")?n=g.cache.jsonConfig[t].srcDir:g.cache.jsonConfig[t].hasOwnProperty("srcDirs")&&(a&&g.cache.jsonConfig[t].srcDirs.hasOwnProperty(a)?n=g.cache.jsonConfig[t].srcDirs[a]:g.cache.jsonConfig[t].srcDirs.hasOwnProperty("Default")?n=g.cache.jsonConfig[t].srcDirs.Default:g.cache.jsonConfig[t].srcDirs.hasOwnProperty("default")&&(n=g.cache.jsonConfig[t].srcDirs.default)),n+e+o},g.getAssetUrl=function(e,t,a,n){var o="/",c=g.cache.jsonConfig[a].hasOwnProperty(e)?g.cache.jsonConfig[a][e]:"";return g.cache.jsonConfig[a].hasOwnProperty("srcDir")?o=g.cache.jsonConfig[a].srcDir:g.cache.jsonConfig[a].hasOwnProperty("srcDirs")&&(n&&g.cache.jsonConfig[a].srcDirs.hasOwnProperty(n)?o=g.cache.jsonConfig[a].srcDirs[n]:g.cache.jsonConfig[a].srcDirs.hasOwnProperty("Default")?o=g.cache.jsonConfig[a].srcDirs.Default:g.cache.jsonConfig[a].srcDirs.hasOwnProperty("default")&&(o=g.cache.jsonConfig[a].srcDirs.default)),o+t+c},g.addTemplate=function(e,t){g.templates[e]=t},g.addDataTemplate=function(e,t){g.templates.data[e]=t},g.loadAndAttachTo=function(e,a){t(e,function(e){h(e,a)})},g.loadFromObjAndAttachTo=function(e,t){a(e,function(e){c(e),d(e,t)})},g.reloadFromUrlByID=function(e){var t=parseInt(e);"number"==typeof t&&this.cache.jsonUrl[t]&&this.cache.elementID[t]?(this.reset(t),this.loadAndAttachTo(this.cache.jsonUrl[t],this.cache.elementID[t])):console.log("Could not reload: cacheID "+e+" is invalid.")},g.reloadFromObjByID=function(e,t){var a=parseInt(t);"number"==typeof a&&this.cache.elementID[a]?(this.reset(a),this.loadFromObjAndAttachTo(e,this.cache.elementID[a])):console.log("Could not reload: cacheID "+t+" is invalid.")},g.attach=g.loadAndAttachTo,g.attachWith=g.loadFromObjAndAttachTo,g.reload=g.reloadFromUrlByID,g.reloadwith=g.reloadFromObjByID,g}():console.log("Ledj is already defined.")}(window)},function(e,t,a){"use strict";Ledj.addTemplate("gifGrid",function(e){return'<div class="ledj-gif-grid">\n'+(e.objectKey?Ledj.cache.jsonData[e.cacheID][e.objectKey]:Ledj.cache.jsonData[e.cacheID]).map(function(t,a){return'<div class="ledj-gif-item" id="ledj-gif-item-'+a+'">\n        <div class="ledj-gif-loading-overlay" id="ledj-gif-loading-overlay-'+a+'"></div>\n        <div class="ledj-gif-content" id="ledj-gif-content-'+a+'">\n            <a class="ledj-gif-title-link" href="'+Ledj.getImageUrl(t.filename,e.cacheID,e.objectKey)+'" target="_blank">'+t.title+"</a>\n            <hr />\n            "+(Ledj.cache.jsonData.hasOwnProperty("source")?"\x3c!-- Source: "+Ledj.cache.jsonData.source+" --\x3e":"")+'\n            <div class="ledj-gif-container">\n                <video id="ledj-video-'+a+'" autoplay="true" loop="true">\n                    <source src="'+Ledj.getAssetUrl("vidExt",t.filename,e.cacheID,e.objectKey)+'" type="video/mp4" />\n                    <img src="'+Ledj.getImageUrl(t.filename,e.cacheID,e.objectKey)+'" title="Your browser does not support the <video> tag." />\n                </video>\n            </div>\n        </div>\n    </div>'}).join("")+"\n</div>"})},function(e,t,a){"use strict";Ledj.addTemplate("linkGrid",function(e){return'<div class="ledj-link-grid">\n'+(e.objectKey?Ledj.cache.jsonData[e.cacheID][e.objectKey]:Ledj.cache.jsonData[e.cacheID]).map(function(t){return'<a class="link-grid-item" href="'+t[e.itemHrefKey]+'"'+(e.newTab?' target="_blank"':"")+'>\n        <img src="'+Ledj.getImageUrl(t[e.itemImageKey],e.cacheID,e.objectKey)+'" title="'+t[e.itemTitleKey]+'" />\n        <span>'+t[e.itemTitleKey]+"</span>\n    </a>"}).join("")+"\n</div>"})},function(e,t,a){"use strict";Ledj.addTemplate("parent",function(e){return'<div class="ledj-container" id="ledj-container-'+e.cacheID+'">\n    '+(e.title?e.title:"")+"\n    "+e.childHTML+"\n</div>"})},function(e,t,a){"use strict";Ledj.addTemplate("table",function(e){return'<table class="ledj-table">\n    <thead>\n        <tr>\n        '+Object.keys(Ledj.cache.jsonConfig[e.cacheID].headers).map(function(t){return"\n            <th>"+Ledj.cache.jsonConfig[e.cacheID].headers[t].name+"</th>\n        "}).join("\n")+"\n        </tr>\n    </thead>\n    <tbody>\n    "+(e.objectKey?Ledj.cache.jsonData[e.cacheID][e.objectKey]:Ledj.cache.jsonData[e.cacheID]).map(function(t){return"\n        <tr>\n        "+Object.keys(Ledj.cache.jsonConfig[e.cacheID].headers).map(function(a){return"\n            <td>"+Ledj.getCellContent(Ledj.cache.jsonConfig[e.cacheID].headers[a],a,t)+"</td>\n        "}).join("\n")+"\n        </tr>\n    "}).join("\n")+"\n    </tbody>\n</table>"})},function(e,t,a){"use strict";Ledj.addTemplate("todoList",function(e){return'<div class="ledj-todo-list">\n    <code>#todo</code>\n</div>'})},function(e,t,a){"use strict";Ledj.addDataTemplate("code",function(e){return'<span class="string code"><code>'+e.text+"</code></span>"})},function(e,t,a){"use strict";Ledj.addDataTemplate("date",function(e){return'<span class="date">'+Ledj.formatDateString(e.date,e.dateFormat)+"</span>"})},function(e,t,a){"use strict";Ledj.addDataTemplate("image",function(e){return'<img class="image" src="'+Ledj.getImageUrl(e.src,e.cacheID,e.objectKey)+'"'+(e.alt?' alt="'+e.alt+'" ':"")+"/>"})},function(e,t,a){"use strict";Ledj.addDataTemplate("phone",function(e){return'<span class="phone"><a href="tel:'+e.phone_num+'">'+e.phone_num+"</a></span>"})},function(e,t,a){"use strict";Ledj.addDataTemplate("string",function(e){return'<span class="string">'+e.text+"</span>"})},function(e,t,a){"use strict";Ledj.addDataTemplate("tagArray",function(e){return'<div class="tag-container">\n'+e.tags.map(function(e){return'<span class="tag '+Ledj.nameToID(e)+'">'+e+"</span>"}).join("")+"\n</div>"})},function(e,t,a){"use strict";Ledj.addDataTemplate("url",function(e){return'<a href="'+e.href+'" target="_blank">'+e.text+"</a>"})},function(e,t){}])});